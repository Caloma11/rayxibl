(() => {
  let isLink = "<%= @is_link%>";
  isLink = (isLink === "true");
  if (isLink) {
    const linksList = document.querySelector(".links-list");
    const modalWrapper = document.getElementById("links-modal");
    const addALink = document.getElementById("add-a-link");

    // Close modal
    modalWrapper.classList.add("none");
    // Clear modal form
    document.querySelector("#links-modal form").reset();

    const linkHTML = (`<%= j render('profile_attachments/edit_link_button', attributes: {is_link: true, title: @profile_attachment.title.capitalize }) %>`);

    // Insert new button
    linksList.insertAdjacentHTML('beforeend', linkHTML);

    // Change "A LINK" to "ANOTHER"
    const zapIconPath = "<%= image_path 'icons/zap.svg' %>";
    addALink.innerHTML = `<img alt="zap" class="mr-2" src="${zapIconPath}">ADD ANOTHER`

    window.toBindMoreTogglerMultiple(true);

  } else {
    // Close modal
    const modalWrapper = document.getElementById("documents-modal");
    modalWrapper.classList.add("none");
    // Clear modal form
    document.querySelector("#documents-modal form").reset();

    const uploadADocument = document.getElementById("upload-a-document");
    const documentsList = document.querySelector(".documents-list");
    const paperclipIconPath = "<%= image_path 'icons/paperclip.svg' %>";

    const docHTML = (`<%= j render('profile_attachments/edit_link_button', attributes: {is_link: false, title: @profile_attachment.title.capitalize }) %>`);
    documentsList.insertAdjacentHTML("beforeend", docHTML);

    uploadADocument.innerHTML = `<img alt="paperclip" class="mr-2" src="${paperclipIconPath}">ADD ANOTHER`

    window.toBindMoreTogglerMultiple(true);

  }
})();


// TODO:

// Group all const that are repeated into an attributes object and put the HTML string in a partial

