(() => {

  const email = "<%= @email %>";
  const emailInput = document.getElementById("invitation_email");

  if (email === "" ) {
    emailInput.style.border = "1px solid red";
    return
  } else {
    emailInput.style.border = "none";
  }

  const form = document.querySelector(".simple_form.invitation");

  const invitees = document.querySelectorAll(".invitedWrapper");
  if (invitees.length > 4) {
    invitees[0].remove();
  }

  const invitedHTML = (`<%= j render('custom_invitations/invited_list_item') %>`);


  form.insertAdjacentHTML('beforebegin', invitedHTML)

  form.reset();

})();
